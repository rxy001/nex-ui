# yaml-language-server: $schema=https://storage.googleapis.com/coderabbit_public_assets/schema.v2.json
language: "en-US"
early_access: false

reviews:
  profile: "chill"
  high_level_summary: true
  high_level_summary_placeholder: "<!-- This is an auto-generated comment: release notes by coderabbit.ai -->"
  
  # Auto review settings
  auto_review:
    enabled: true
    drafts: false
    
    # Ignore PRs with these keywords in title
    ignore_title_keywords:
      - "WIP"
      - "DO NOT MERGE"
      - "ci(changesets)"
      - "chore(deps)"
      - "docs:"
      - "[skip review]"
    
    # Monitored base branches
    base_branches:
      - "main"
      - "dev"
      - "fix/.*"
      - "chore/.*"
      - "feat/.*"
      - "refactor/.*"
      - "test/.*"

  # Path-specific instructions
  path_instructions:
    # React components
    - path: "packages/react/**/*.{ts,tsx}"
      instructions: |
        - Ensure components have proper TypeScript type definitions
        - Check if props interfaces are correctly exported
        - Verify components follow React best practices
        - Ensure proper JSDoc comments
        - Check if memo optimization is needed
        - Verify event handling is correct

    # Utils package
    - path: "packages/utils/**/*.{ts,tsx}"
      instructions: |
        - Ensure utility functions have complete type definitions
        - Check edge case handling
        - Verify error handling mechanisms
        - Ensure proper unit tests

    # Hooks package
    - path: "packages/hooks/**/*.{ts,tsx}"
      instructions: |
        - Verify Hook type definitions
        - Check dependency array correctness
        - Ensure cleanup function implementation
        - Verify Hook reusability

    # Test files
    - path: "**/*.{test,spec}.{ts,tsx,js,jsx}"
      instructions: |
        - Ensure sufficient test coverage
        - Verify test case effectiveness
        - Check proper mock usage
        - Ensure correct async test handling

    # Documentation files
    - path: "docs/**/*.{md,mdx,tsx}"
      instructions: |
        - Check documentation completeness and accuracy
        - Verify code example correctness
        - Ensure links are valid
        - Check format consistency

  # Path filters to ignore certain files
  path_filters:
    - "**/*.min.js"
    - "**/*.map"
    - "**/node_modules/**"
    - "**/dist/**"
    - "**/build/**"
    - "**/coverage/**"
    - "**/.next/**"
    - "**/.turbo/**"
    - "**/storybook-static/**"
    - "pnpm-lock.yaml"
    - "**/*.log"

# Knowledge base for project understanding
knowledge_base:
  learnings:
    - "This is a React UI component library built with TypeScript"
    - "Uses pnpm workspaces for monorepo management"
    - "Follows atomic design principles"
    - "Uses Storybook for component documentation"
    - "Implements design system patterns"
    - "Uses changesets for version management"
    - "Supports both styled-components and CSS-in-JS"